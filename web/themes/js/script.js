function numbersOnly(inpObj,eventobj){    return (eventobj.charCode >= 48 && eventobj.charCode <= 57 && parseInt(inpObj.value) !== 0);}    function createXMLHttpRequest() {    if (window.XMLHttpRequest) {        var XHR = new XMLHttpRequest();        if (XHR.overrideMimeType) {            XHR.overrideMimeType("text/html");        }        return XHR;    }    if (window.ActiveXObject) {        try {            var XHR = new ActiveXObject("Msxml2.XMLHTTP");            browserType = "IE";            return XHR;        } catch (e) {            try {                var XHR = new ActiveXObject("Microsoft.XMLHTTP");                browserType = "IE";                return XHR;            } catch (e) {                alert("Your browser does not support AJAX!");                browserType = "Unknown";                return null;            }        }    }    return null;}function login(){    var username=document.getElementById("inputEmail").value;    var pass=document.getElementById("inputPassword").value;    var XHR = createXMLHttpRequest();    var  requestJSON={            "requestType" : "login",            "username":username,            "password":pass    };    XHR.open("POST", "LoginServlet", false);    XHR.setRequestHeader("Content-type", "application/x-www-form-urlencoded");    XHR.send("loginRequestJSON=" + escape(JSON.stringify(requestJSON)));    refreshPage(XHR);}function logout() {    var XHR = createXMLHttpRequest();    var  requestJSON={        "requestType" : "logout"    };    XHR.open("POST", "LoginServlet", false);    XHR.setRequestHeader("Content-type", "application/x-www-form-urlencoded");    XHR.send("loginRequestJSON=" + escape(JSON.stringify(requestJSON)));    refreshPage(XHR);}function refreshPage(XHR) {    if (XHR.readyState == 4) {        if (XHR.status == 200) {            var response = XHR.responseText;            response = response.toString();             if(response.trim() === 'Successful'){                window.location = "";            }            else{                alert("Invalid Username or Password.");            }            }    }}var itemsInCart=0;function updateCart(){	alert(itemsInCart);	alert(document.getElementById("cartUpdate"));	itemsInCart = itemsInCart+1;	document.getElementById("cartUpdate").innerHTML="<i class=\"icon-shopping-cart icon-white\"></i> ["+itemsInCart+"  ] Itemes in your cart ";        }function refreshCart(){	alert("ddd");	document.getElementById("cartUpdate").innerHTML="<i class=\"icon-shopping-cart icon-white\"></i> ["+itemsInCart+"  ] Itemes in your cart ";}var cart={"orderdetails":[]};var allProductsJSON ;function addToCart(nodeObj){    var divNode = nodeObj.parentNode;    var productName = divNode.getElementsByTagName("h5")[0].innerHTML;    if(!checkProductInCart(productName)){        var aTag = nodeObj.getElementsByTagName("a");        var price = parseFloat((aTag[aTag.length - 1].innerHTML).replace("$",""));        var url = getImageURL(productName);        cart.orderdetails.push({"productname":productName,"url":url,"quantity":1, "price": price});    }    alert(JSON.stringify(cart));    alert(productName.trim());}function submitOrder(){   var XHR = createXMLHttpRequest();    alert("Login Successful"+JSON.stringify(cart));    XHR.onreadystatechange = function () {        //addCities(XHR, divObj);    };        XHR.open("POST", "OrderRequestServlet", true);    XHR.setRequestHeader("Content-type", "application/x-www-form-urlencoded");    XHR.send("orderRequestJSON=" + escape(JSON.stringify(cart))); }function plus(inpobj){       var a=inpobj.getElementsByTagName("input")[0].value;    inpobj.getElementsByTagName("input")[0].value=parseInt(a)+1;    total();}function minus(inpobj){    var a=inpobj.getElementsByTagName("input")[0].value;    a = parseInt(a);    if(a !== 1){        inpobj.getElementsByTagName("input")[0].value=parseInt(a)-1;        total();    } }function removeRow(inpobj){       nodetd = inpobj.parentNode;    nodetr = nodetd.parentNode;    //alert(nodetr.innerHTML);    nodetr.parentNode.removeChild(nodetr);    var productName = (nodetr.cells[1].innerHTML.split("<br>")[0]).trim();    alert(productName);    alert(JSON.stringify(cart));    var ind = -1;    for(var i in cart.orderdetails){        if(cart.orderdetails[i].productname == productName){            ind = i;        }    }    if(ind != -1){        cart.orderdetails.splice(ind,1);    }    alert(JSON.stringify(cart));    total();}  function total() {    var table=document.getElementById("totalTable");    var row=table.getElementsByTagName("tr");    var rows = table.rows.length;    var total=0;    var totalTax = 0;    for(var i=1;i<rows-3;i++){        var totR=parseFloat((row[i].cells[3].innerHTML).replace("$",""));        var totalRow=parseInt(row[i].getElementsByTagName("input")[0].value)*totR;        totalRow=totalRow.toFixed(2);        row[i].cells[5].innerHTML="$"+totalRow;        total= parseFloat(total) + parseFloat((row[i].cells[5].innerHTML).replace("$",""));        totalTax = totalTax + parseFloat((row[i].cells[4].innerHTML).replace("$",""));        total = total.toFixed(2);        totalTax = Math.round(totalTax * 100)/100;     }     document.getElementById("totalvalue").innerHTML= "$"+total;     document.getElementById("totalTax").innerHTML= "$"+totalTax; }  function fetchProducts(){    var XHR = createXMLHttpRequest();    var  productRequestJSON={        "requestType" : "FetchProducts"    };    XHR.onreadystatechange = function () {        addProducts(XHR);    };        XHR.open("POST", "ProductManagementServlet", true);    XHR.setRequestHeader("Content-type", "application/x-www-form-urlencoded");    XHR.send("productRequestJSON=" + escape(JSON.stringify(productRequestJSON)));  }  function addProducts(XHR){    if (XHR.readyState == 4) {        if (XHR.status == 200) {            var response = XHR.responseText;            //alert(response);            var productsArrayJSON = JSON.parse(response);            allProductsJSON = productsArrayJSON;            var productTag = "";            for(var i in productsArrayJSON){                productTag +=  "<li class=\"span3\">";		productTag +=  "<div class=\"thumbnail\">";                productTag +=  "<a  href=\"product_details.jsp\"><img src=\""+productsArrayJSON[i].url+"\" alt=\"\"/></a>";		productTag +=  "<div class=\"caption\">";		productTag +=  "<h5>"+productsArrayJSON[i].productName+"</h5>";		  		productTag +=  "<p>"+productsArrayJSON[i].productDescription+"</p>";		productTag +=  "<h4 style=\"text-align:center\"><a class=\"btn\" href=\"product_details.jsp\"> <i class=\"icon-zoom-in\"></i></a> <a class=\"btn\" href=\"#\" onclick=\"addToCart(this.parentNode)\">Add to <i class=\"icon-shopping-cart\"></i></a> <a class=\"btn btn-primary\" href=\"#\">"+productsArrayJSON[i].productPrice+"</a></h4></div></div></li>";            }            //alert(productTag);            document.getElementById("allProducts").innerHTML= productTag;        }    } }  function getImageURL(productName){     for(var i in allProductsJSON){         if(allProductsJSON[i].productName == productName.toString().trim()){             return allProductsJSON[i].url;         }     } } function flushCart(){    var XHR = createXMLHttpRequest();    XHR.onreadystatechange = function () {    };    XHR.open("POST", "ShoppingCartServlet", false);    XHR.setRequestHeader("Content-type", "application/x-www-form-urlencoded");    XHR.send("cartJSON=" + escape(JSON.stringify(cart)));  }  function loadCartOnStartup(cartJSONString){    if(null != cartJSONString && "null" != cartJSONString && '' != cartJSONString){        cart = null;        cart = JSON.parse(cartJSONString);    } }   function checkProductInCart(productName){    for(var i in cart.orderdetails){        if(cart.orderdetails[i].productname == productName){            return true;        }    }    return false; }